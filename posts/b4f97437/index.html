<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png"><link rel="icon" href="/img/fluid.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="VestJin---靳马珏"><meta name="keywords" content="记录 博客 日志"><meta name="description" content="原文链接：关于 SQLite 的疯狂和有趣的事实集合 - blag   SQLite 是部署最多、使用最多的数据库。有超过一万亿（1000000000000000 或一百万）个 SQLite 数据库正在积极使用。 它由三个人维护。他们不允许外部贡献。  SQLite 的使用量可能比所有其他数据库引擎的总和还要多。数十亿个 SQLite 副本存在于野外。它无处不在。    它也可能是部署最多的"><meta property="og:type" content="article"><meta property="og:title" content="关于SQLite的各种趣事"><meta property="og:url" content="http://blog.jinmajue.site/posts/b4f97437/index.html"><meta property="og:site_name" content="靳马珏日志"><meta property="og:description" content="原文链接：关于 SQLite 的疯狂和有趣的事实集合 - blag   SQLite 是部署最多、使用最多的数据库。有超过一万亿（1000000000000000 或一百万）个 SQLite 数据库正在积极使用。 它由三个人维护。他们不允许外部贡献。  SQLite 的使用量可能比所有其他数据库引擎的总和还要多。数十亿个 SQLite 副本存在于野外。它无处不在。    它也可能是部署最多的"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://avi.im/blag/images/2024/sqlite-fact-3.png"><meta property="article:published_time" content="2025-01-13T07:51:13.000Z"><meta property="article:modified_time" content="2025-01-13T07:59:19.378Z"><meta property="article:author" content="VestJin---靳马珏"><meta property="article:tag" content="notes"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://avi.im/blag/images/2024/sqlite-fact-3.png"><meta name="referrer" content="no-referrer-when-downgrade"><title>关于SQLite的各种趣事 - 靳马珏日志</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"blog.jinmajue.site",root:"/",version:"1.9.8",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:"§"},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,follow_dnt:!0,baidu:null,google:{measurement_id:null},tencent:{sid:null,cid:null},leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1},umami:{src:null,website_id:null,domains:null,start_time:"2023-08-30T00:00:00.000Z",token:null,api_server:null}},search_path:"/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 7.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="靳马珏日志" type="application/atom+xml">
</head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>靳马珏的网络日志</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/" target="_self"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/" target="_self"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/default.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="关于SQLite的各种趣事"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2025-01-13 15:51" pubdate>2025年1月13日 下午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 1.8k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 16 分钟 </span><span id="busuanzi_container_page_pv" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="busuanzi_value_page_pv"></span> 次</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">关于SQLite的各种趣事</h1><div class="markdown-body"><hr><hr><hr><p>原文链接：<a target="_blank" rel="noopener" href="https://avi.im/blag/2024/sqlite-facts/">关于 SQLite 的疯狂和有趣的事实集合 - blag</a></p><hr><ol><li><p>SQLite 是部署最多、使用最多的数据库。有超过一万亿（1000000000000000 或一百万）个 SQLite 数据库正在积极使用。</p><p>它由<a target="_blank" rel="noopener" href="https://www.sqlite.org/crew.html">三个人</a>维护。他们不允许外部贡献。</p></li><li><p>SQLite 的使用量可能比所有其他数据库引擎的总和还要多。数十亿个 SQLite 副本存在于野外。它无处不在。</p></li></ol><ol><li>它也可能是部署最多的五个软件模块之一。</li></ol><ol><li><p><a target="_blank" rel="noopener" href="https://hwaci.com/">Hwaci</a> 是 SQLite 背后的公司。他们也喜欢音乐（？</p><p><img src="https://avi.im/blag/images/2024/sqlite-fact-3.png" srcset="/img/loading.gif" lazyload alt="img"></p></li><li><p>SQLite 起源于一艘美国军舰。D. Richard Hipp （DRH） 正在为海军驱逐舰 USS Oscar Austin 构建软件。每当服务器出现故障时，现有软件就会停止工作（这是在 2000 年代）。对于一艘战列舰来说，这是不可接受的。</p><p>因此，DRH 提出了一个问题：如果数据库在没有任何服务器的情况下工作呢？用 DRH 的话来说：</p><blockquote><p>为什么我们甚至需要一个服务器？为什么我不能直接从磁盘驱动器上拉出它？这样，如果计算机足够健康，它就可以运行我们的应用程序，我们没有可能失败并导致我们失败的依赖项，我环顾四周，没有 SQL 数据库引擎可以做到这一点，与我一起工作的一个人说，“Richard，你为什么不写一个呢？“好吧，我试一试。”我没有立即这样做，但后来，资金中断了。那是在 2000 年，如果我没记错的话，纽特·金里奇和比尔·克林顿正在发生某种争吵，所以所有的政府合同都被关闭了，所以我失业了几个月，我想，“好吧，我现在就写那个数据库引擎吧。</p></blockquote></li><li><p>与大多数使用标准许可证（如 MIT 或 GPL）的开源项目不同，SQLite 不附带 OSI 批准的许可证。</p></li></ol><p>相反，SQLite 被发布到公共领域，并且限制更少。</p><p>另请注意，在一些不承认公有领域的国家/地区/司法管辖区，这可能是<a target="_blank" rel="noopener" href="https://opensource.org/blog/public-domain-is-not-open-source">一个问题</a>。因此，SQLite <a target="_blank" rel="noopener" href="https://www.sqlite.org/purchase/license">出售许可证</a>，称为“所有权保证”。</p><ol><li>他们不允许外部贡献。<em>你不能</em>只是发送一个 pull request 并希望补丁会被接受。</li></ol><ol><li>开源，而不是开放贡献</li></ol><p>为 SQLite 做贡献是仅限邀请的（我没有源代码）。只有在您收到邀请并签署了一份宣誓书，将你的贡献献给公共领域后，你才能提交补丁。</p><ol><li><p>他们是怎么做饭的？</p><p>SQLite 中的每一行代码都有超过 600 行测试代码。测试覆盖库中 100% 的分支（和 100% <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Modified_condition/decision_coverage">的 MC/DC</a>）。该测试套件非常多样化，包括模糊测试、边界值测试、回归测试以及模拟操作系统崩溃、电源损失、I/O 错误和内存不足错误的测试。</p><p>SQLite 最初是作为 <a target="_blank" rel="noopener" href="https://www.sqlite.org/tclsqlite.html">Tcl 扩展</a>开始的，其主要测试套件是用 Tcl 编写的。</p></li><li><p>有趣的是，一些 SQLite 测试是专有的。名为 <a target="_blank" rel="noopener" href="https://www.sqlite.org/th3.html">TH3 （Test Harness 3）</a> 的测试套件可实现代码的 100% 分支覆盖率，是专有的，不开放访问。</p><p>我不知道有任何其他项目使代码免费，但测试套件是付费的。</p><p>然而，他们无法销售 TH3 的一份副本。DRH 在播客中说：</p><blockquote><p>100% MCD 测试，称为 TH3。那是专有的。我的想法是，我们将这些测试出售给航空电子设备制造商，并以这种方式赚钱。我们正好卖了零份，所以这并没有真正奏效。</p></blockquote><p>为了获得访问权限，需要成为 SQLite Consortium 的一员，每年的费用为 120K 美元。</p></li><li><p>这是一个有趣的商业模式。他们通过许可证、付费支持、维护服务、联盟成员资格和商业扩展来产生收入。</p></li><li><p>SQLite 没有行为准则 （CoC），而是源自《圣本笃规则》第 4 章中的“善行工具”的<a target="_blank" rel="noopener" href="https://sqlite.org/codeofethics.html">道德准则</a></p></li></ol><ol><li>在 SQLite 中：代替法律声明，这里有一个<a target="_blank" rel="noopener" href="https://github.com/sqlite/sqlite/blob/624cb96/src/wal.c#L4,#L9">祝福</a>：</li></ol><pre><code class="hljs">所有的源代码文件都附带了一个祝福。
</code></pre><ol><li>SQLite 的速度如此之快，它们与 .对于某些用例，您可以使用 SQLite 而不是文件系统，这可以加快 35% 的速度。<code>fopen</code></li></ol><ol><li>SQLite 与 Redis（猜猜哪个更快？</li></ol><pre><code class="hljs">对于[某些用例](https://x.com/iavins/status/1849422515027763227)，由于网络堆栈和（反）序列化开销，SQLite 可能比 Redis 更快。
</code></pre><ol><li><p>但是，与大多数数据库不同的是，SQLite 只有一个写入器模型。不能有多个并发写入器。</p><p>最近在 2010 年，通过添加 WAL 模式，这种情况也发生了变化。在此之前，您可以拥有读者或作家，但永远不能在一起。</p></li><li><p>还有其他一些事情在其他数据库中很常见，但在 SQLite 中却不常见：</p><ul><li>默认值为 rollback journal 模式，该模式限制您拥有多个读取器或单个写入器</li><li>外键已禁用;他们是自愿加入的</li><li>它是 “弱类型”。SQLite 称其为“类型亲和性”。这意味着即使你已经定义了一个类型，你也可以在列中插入任何内容。强类型列是可选的（由 <a target="_blank" rel="noopener" href="https://www.sqlite.org/stricttables.html"><code>STRICT</code></a> 表）。</li><li>您在其他数据库中期望的许多 <a target="_blank" rel="noopener" href="https://sqlite.org/omitted.html"><code>ALTER</code> 命令</a>不起作用。例如，您不能向现有列添加约束。（他们最近添加了重命名列名称的功能）</li></ul><p>这里有一整套<a target="_blank" rel="noopener" href="https://www.sqlite.org/quirks.html">怪癖。</a></p></li><li><p>我讨厌它不强制类型。这完全是 YOLO：</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> <span class="hljs-keyword">user</span>(id <span class="hljs-type">INTEGER</span>);<br><span class="hljs-keyword">INSERT into</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">VALUES</span> ("YOLO!"); <span class="hljs-comment">--- This works!</span><br></code></pre></td></tr></tbody></table></figure><p>不仅如此，如果你给出一些随机类型，它不会引发任何错误。</p><p><code>CREATE TABLE t(value TIMMYSTAMP);</code></p><p>没有类型，但 SQLite 很高兴地接受这一点。<code>TIMMYSTAMP</code></p><p>SQLite 有五种类型：、、、、、 .想知道什么被诅咒的东西吗？类型亲和性通过<a target="_blank" rel="noopener" href="https://www.sqlite.org/datatype3.html#determination_of_column_affinity">子字符串匹配</a>工作！<code>NULL``INTEGER``REAL``TEXT``BLOB</code></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> t(<span class="hljs-keyword">value</span> SPONGEBLOB) <span class="hljs-comment">--- This is BLOB type!</span><br></code></pre></td></tr></tbody></table></figure><p>所以，是的，这也发生了：</p><blockquote><p>请注意，由于 “POINT” 末尾的 “INT” ，声明的 “FLOAT POINT” 类型将提供 INTEGER 关联，而不是 REAL 关联。</p></blockquote></li><li><p>这是我<a target="_blank" rel="noopener" href="https://x.com/iavins/status/1865746403072389612">最喜欢的传说</a>之一。SQLite 不得不将默认前缀从 更改为用户在半夜开始给开发人员打电话<code>sqlite_``etilqs_</code></p></li></ol><ol><li><p>SQLite 非常重视向后兼容性</p><blockquote><p>SQLite 版本 3 的所有版本都可以读取和写入由第一个 SQLite 3 版本（版本 3.0.0）创建的数据库文件，其历史可以追溯到 2004 年 6 月 18 日。这就是 “向后兼容性”。开发人员承诺为 SQLite 3 的所有未来版本保持数据库文件格式的向后兼容性。</p></blockquote></li><li><p>但是他们非常重视向后兼容性，以至于即使他们<a target="_blank" rel="noopener" href="https://x.com/iavins/status/1851276312876326980">发布了一个 bug</a>，他们也不会修复它</p></li></ol><ol><li><p>SQLite 的作者 D. Richard Hipp （DRH） 认为现有的版本控制系统不合适。所以他写了自己的书，叫<a target="_blank" rel="noopener" href="https://fossil-scm.org/home/doc/trunk/www/fossil-v-git.wiki">做 Fossil</a>。当然，Fossil 是由 SQLite 提供支持的。</p><p>这让我想起了 Linus 是如何编写 Git 的。</p><p>DRH 还编写了自己的解析器生成器，名为 Lemon。</p></li><li><p>DRH 根据 Donald Knuth 的 TAOCP 一书中的算法编写了 B 树，并在旅行时在飞机上对其进行编码（基于超级）</p></li><li><p>SQLite 发音为“Ess-Cue-El-ite”。不过，没有官方指南。<a target="_blank" rel="noopener" href="https://web.archive.org/web/20201126110450/http://sqlite.1065341.n5.nabble.com/SQLite-Pronunciation-td88186.html#message88194">SQLite 论坛</a>中提到的 DRH：</p><blockquote><p>我写了 SQLite，我认为它应该发音为“S-Q-L-ite”。就像一种矿物。但是我很酷你们想怎么发音就怎么发音。</p><p>:-)</p></blockquote></li></ol></div><hr><div><div class="post-metas my-3"><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/notes/" class="print-no-link">#notes</a></div></div><div class="license-box my-3"><div class="license-title"><div>关于SQLite的各种趣事</div><div>http://blog.jinmajue.site/posts/b4f97437/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>VestJin---靳马珏</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2025年1月13日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-cc-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/posts/16c889de/" title="施氏食狮史"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">施氏食狮史</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/posts/93e43e6b/" title="宁静祷文"><span class="hidden-mobile">宁静祷文</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><script type="text/javascript">Fluid.utils.loadComments("#comments",(function(){var t=document.documentElement.getAttribute("data-user-color-scheme");t="dark"===t?"github-dark":"boxy-light",window.UtterancesThemeLight="boxy-light",window.UtterancesThemeDark="github-dark";var e=document.createElement("script");e.setAttribute("src","https://utteranc.es/client.js"),e.setAttribute("repo","Code-Mist/fluid-comment"),e.setAttribute("issue-term","pathname"),e.setAttribute("theme",t),e.setAttribute("crossorigin","anonymous"),document.getElementById("comments").appendChild(e)}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><script>Fluid.utils.createScript("https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js",(function(){mermaid.initialize({theme:"default"}),Fluid.utils.listenDOMLoaded((function(){Fluid.events.registerRefreshCallback((function(){"mermaid"in window&&mermaid.init()}))}))}))</script><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">总访问量 <span id="busuanzi_value_site_pv"></span> 次 </span><span id="busuanzi_container_site_uv" style="display:none">总访客数 <span id="busuanzi_value_site_uv"></span> 人</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script>window.MathJax?(MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typeset(),MathJax.typesetPromise()):window.MathJax={tex:{inlineMath:{"[+]":[["$","$"]]}},loader:{load:["ui/lazy"]},options:{renderActions:{insertedScript:[200,()=>{document.querySelectorAll("mjx-container").forEach(t=>{let e=t.parentNode;"li"===e.nodeName.toLowerCase()&&e.parentNode.classList.add("has-jax")})},"",!1]}}},Fluid.events.registerRefreshCallback((function(){"MathJax"in window&&MathJax.startup.document&&"function"==typeof MathJax.startup.document.state&&(MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typeset(),MathJax.typesetPromise())}))</script><script src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js"></script><script src="/js/local-search.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>