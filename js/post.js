var $posts={scroller:function(){function s(){return this.callbacks=[],this}return s.prototype.bindScrollEvent=function(){var e=this;window.addEventListener("scroll",function(s){var t=window.pageYOffset;setTimeout(function(){var o={event:s,beforeOffsetY:t};e.callbacks.forEach(function(s){s(o)})},150)})},s},showTopic:function(s){var o=document.getElementById("postTopic"),t=document.getElementById("postTitle"),e=t.getBoundingClientRect(),t=t.offsetTop+e.height;window.pageYOffset>t?(t=0<(e=s&&s.beforeOffsetY)-window.pageYOffset,o.classList.remove("is-hidden-topic-bar"),e-window.pageYOffset==0?(o.classList.remove("is-switch-post-title"),o.classList.remove("is-show-post-title"),o.classList.remove("immediately-show"),o.classList.contains("is-show-scrollToTop-tips")?(o.classList.remove("is-show-scrollToTop-tips"),o.classList.add("is-flash-scrollToTop-tips")):o.classList.add("immediately-show")):t?window.pageYOffset>2*window.innerHeight?(o.classList.remove("immediately-show"),o.classList.remove("is-show-post-title"),o.classList.remove("is-switch-post-title"),o.classList.remove("is-flash-scrollToTop-tips"),o.classList.add("is-show-scrollToTop-tips")):(o.classList.remove("immediately-show"),o.classList.remove("is-show-post-title"),o.classList.remove("is-show-scrollToTop-tips"),o.classList.remove("is-flash-scrollToTop-tips"),o.classList.add("is-switch-post-title")):e-window.pageYOffset!=0&&(o.classList.remove("immediately-show"),o.classList.remove("is-switch-post-title"),o.classList.remove("is-show-scrollToTop-tips"),o.classList.remove("is-flash-scrollToTop-tips"),o.classList.add("is-show-post-title"))):(o.classList.remove("is-flash-scrollToTop-tips"),o.classList.remove("is-show-scrollToTop-tips"),o.classList.remove("is-switch-post-title"),o.classList.remove("is-show-post-title"),o.classList.remove("immediately-show"),o.classList.add("is-hidden-topic-bar"))},catalogueHighlight:function(){var a,n=document.querySelectorAll(".toc a");return 0!==n.length&&(a=document.querySelector(".toc"),function(){for(var o=[],s="is-active",t=(n.forEach(function(s){s.href&&(s=decodeURI(s.href).split("#")[1],o.push(document.getElementById(s)))}),null),e=window.pageYOffset,i=0;i<o.length;i++){var l,c=o[i];c.offsetTop>e+30||((!t||c.offsetTop+60>=t.offsetTop-60)&&(t=c),(c=document.querySelector(".toc ."+s))&&c.classList.remove(s),c='.toc a[href="#'+encodeURI(t.id)+'"]',(c=document.querySelector(c)).classList.add(s),l=a.getBoundingClientRect().height,c.offsetTop>=l-60?a.scrollTo({top:c.offsetTop+100-l}):a.scrollTo({top:0}))}})},smoothScrollToTop:function(){var s=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;1<s?(window.requestAnimationFrame($posts.smoothScrollToTop),scrollTo(0,Math.floor(.85*s))):scrollTo(0,0)},addValineComment(){var s=document.getElementById("vcomments");new Valine({el:"#vcomments",appId:s.dataset.comment_valine_id,appKey:s.dataset.comment_valine_key})},mounted:function(){hljs&&hljs.initHighlighting();var s=new(this.scroller()),o=this.catalogueHighlight();o&&s.callbacks.push(o),s.callbacks.push(this.showTopic),s.bindScrollEvent(),$claudia.fadeInImage(document.querySelectorAll(".post-content img")),document.getElementById("postTopic").addEventListener("click",this.smoothScrollToTop),window.Valine&&this.addValineComment()}};$posts.mounted();